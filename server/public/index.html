<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>RC Car Controller</title>
	<link rel="stylesheet" href="style.css">
</head>

<body>
	<div class="container">
		<header class="header">
			<div class="logo">
				<div class="logo-circle"></div>
				<h1>RC COMMANDER</h1>

				<div class="username">
					<span id="username">Guest</span>
				</div>
			</div>
			<div class="status-indicators">
				<div class="battery-indicator">
					<div class="battery-icon"></div>
					<span class="battery-percentage">85%</span>
				</div>
				<div class="connection-indicator">
					<div class="wifi-icon"></div>
					<span class="connection-status" id="connection-status">Online</span>
				</div>
				<div class="settings-button">
					<button id="settings-btn">‚öôÔ∏è</button>
				</div>
			</div>
		</header>

		<main>
			<div class="video-container">
				<video id="video-feed" autoplay playsinline muted></video>

				<div class="record-button">
					<button id="record-btn">üî¥ Record</button>
				</div>
			</div>

			<div class="telemetry-panel">
				<div class="telemetry-header">
					<h2>Telemetry</h2>
					<button class="refresh-button">üîÑ</button>
				</div>
				<div class="telemetry-stats">
					<div class="stat-box">
						<div class="stat-label">MOTOR TEMP</div>
						<div class="stat-value" id="motor-temp">42¬∞C</div>
					</div>
					<div class="stat-box">
						<div class="stat-label">SIGNAL</div>
						<div class="stat-value" id="signal-strength">-78dBm</div>
					</div>
					<div class="stat-box">
						<div class="stat-label">LATENCY</div>
						<div class="stat-value" id="latency">220ms</div>
					</div>
					<div class="stat-box">
						<div class="stat-label">RUNTIME</div>
						<div class="stat-value" id="runtime">00:22:18</div>
					</div>
				</div>
			</div>

			<div class="controls-panel">
				<h2>Controls</h2>
				<div class="control-instructions">Use keyboard, touch, or gamepad</div>
				<div id="gamepad-status" style="color: gray; font-size: 0.95em; margin-bottom: 8px;">No gamepad detected
				</div>

				<!-- Control mode toggle -->
				<div id="control-mode-toggle" style="margin-bottom: 10px;">
					<label><input type="radio" name="control-mode" value="dpad" checked> D-pad</label>
					<label style="margin-left: 12px;"><input type="radio" name="control-mode" value="joystick">
						Joystick</label>
				</div>

				<!-- Joystick UI (hidden by default) -->
				<div id="joystick-container"
					style="display: none; margin: 0 auto 12px auto; width: 120px; height: 120px; position: relative;">
					<div id="joystick-base"
						style="width: 100%; height: 100%; background: #eee; border-radius: 50%; position: absolute; top: 0; left: 0; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
					</div>
					<div id="joystick-knob"
						style="width: 48px; height: 48px; background: #bbb; border-radius: 50%; position: absolute; top: 36px; left: 36px; box-shadow: 0 1px 4px rgba(0,0,0,0.12); cursor: grab;">
					</div>
				</div>

				<div class="d-pad">
					<button id="up" class="control-btn">‚Üë</button>
					<button id="left" class="control-btn">‚Üê</button>
					<button id="right" class="control-btn">‚Üí</button>
					<button id="down" class="control-btn">‚Üì</button>
				</div>
				<p>Current Direction: <span id="current-direction">None</span></p>
				<div class="drive-indicators">
					<div class="reverse-indicator">REV</div>
					<div class="speed-indicator">0 km/h</div>
					<div class="forward-indicator">FWD</div>
				</div>
				<div class="emergency-stop">
					<p>Press SPACE to emergency stop</p>
				</div>
			</div>
		</main>
	</div>

	<script src="https://unpkg.com/livekit-client/dist/livekit-client.umd.js"></script>
	<script src="script.js"></script>
	<script src="webcam-feed.js"></script>
</body>

</html>